syntax = "proto3";

package mozaic.protocol;

message ClientConnect {
    bytes match_uuid = 1;
    uint32 client_id = 2;
}

message ServerControlConnect {}

message GameserverConnect {
    oneof connect {
        ClientConnect client = 1;
        ServerControlConnect server_control = 2;
    }
}

message ConnectionRequest {
    // TODO: maybe we want to include some headers here

    // This message should identify the connecting client with the
    // server.
    bytes message = 1;
}

message ConnectionResponse {
    oneof response {
        ConnectionSuccess success = 1;
        ConnectionError error = 2;
    }
}

message ConnectionSuccess { }

message ConnectionError {
    string message = 1;
}


message Packet {
    oneof payload {
        Event event = 1;
        CloseConnection close_connection = 2;
    }
}

message Event {
    uint32 type_id = 1; 
    bytes data = 2;
}

message CloseConnection {
    // for future use
}
